<section id="JCR.SearchConfiguration.XMlConfigurationandParameter">
  <title>XML configuration and parameter</title>
  <!-- XML configuration -->   
  <para id="JCR.SearchConfiguration.XMLConfig">
    <citetitle><emphasis role="bold">XML Configuration</emphasis></citetitle>
  </para>  
    <para>JCR index configuration. You can find this file here:
    <filename>.../portal/WEB-INF/conf/jcr/repository-configuration.xml</filename></para>

    <programlisting language="xml">&lt;repository-service default-repository="db1"&gt;
  &lt;repositories&gt;
    &lt;repository name="db1" system-workspace="ws" default-workspace="ws"&gt;
       ....
      &lt;workspaces&gt;
        &lt;workspace name="ws"&gt;
       ....
          &lt;query-handler class="org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex"&gt;
            &lt;properties&gt;
              &lt;property name="index-dir" value="${java.io.tmpdir}/temp/index/db1/ws" /&gt;
              &lt;property name="synonymprovider-class" value="org.exoplatform.services.jcr.impl.core.query.lucene.PropertiesSynonymProvider" /&gt;
              &lt;property name="synonymprovider-config-path" value="/synonyms.properties" /&gt;
              &lt;property name="indexing-configuration-path" value="/indexing-configuration.xml" /&gt;
              &lt;property name="query-class" value="org.exoplatform.services.jcr.impl.core.query.QueryImpl" /&gt;
            &lt;/properties&gt;
          &lt;/query-handler&gt;
        ... 
        &lt;/workspace&gt;
     &lt;/workspaces&gt;
    &lt;/repository&gt;        
  &lt;/repositories&gt;
&lt;/repository-service&gt;</programlisting>

<!-- Configuration parameters -->

  <para id="JCR.SearchConfiguration.Config_Parameters">
    <citetitle><emphasis role="bold">Configuration parameters</emphasis></citetitle>
  </para>  
    <table>
      <title></title>

      <tgroup cols="4">
        <thead>
          <row>
            <entry>Parameter</entry>

            <entry>Default</entry>

            <entry>Description</entry>

            <entry>Since</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry>index-dir</entry>

            <entry>none</entry>

            <entry>The location of the index directory. This parameter is
            mandatory. Up to 1.9, this parameter called "indexDir"</entry>

            <entry>1.0</entry>
          </row>

          <row>
            <entry>use-compoundfile</entry>

            <entry>true</entry>

            <entry>Advises lucene to use compound files for the index
            files.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>min-merge-docs</entry>

            <entry>100</entry>

            <entry>Minimum number of nodes in an index until segments are
            merged.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>volatile-idle-time</entry>

            <entry>3</entry>

            <entry>Idle time in seconds until the volatile index part is moved
            to a persistent index even though minMergeDocs is not
            reached.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>max-merge-docs</entry>

            <entry>Integer.MAX_VALUE</entry>

            <entry>Maximum number of nodes in segments that will be merged.
            The default value changed in JCR 1.9 to Integer.MAX_VALUE.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>merge-factor</entry>

            <entry>10</entry>

            <entry>Determines how often segment indices are merged.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>max-field-length</entry>

            <entry>10000</entry>

            <entry>The number of words that are fulltext indexed at most per
            property.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>cache-size</entry>

            <entry>1000</entry>

            <entry>Size of the document number cache. This cache maps uuids to
            lucene document numbers</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>force-consistencycheck</entry>

            <entry>false</entry>

            <entry>Runs a consistency check on every startup. If false, a
            consistency check is only performed when the search index detects
            a prior forced shutdown.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>auto-repair</entry>

            <entry>true</entry>

            <entry>Errors detected by a consistency check are automatically
            repaired. If false, errors are only written to the log.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>query-class</entry>

            <entry>QueryImpl</entry>

            <entry>Class name that implements the javax.jcr.query.Query
            interface.This class must also extend from the class:
            org.exoplatform.services.jcr.impl.core.query.AbstractQueryImpl.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>document-order</entry>

            <entry>true</entry>

            <entry>If true and the query does not contain an 'order by'
            clause, result nodes will be in document order. For better
            performance when queries return a lot of nodes set to
            'false'.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>result-fetch-size</entry>

            <entry>Integer.MAX_VALUE</entry>

            <entry>The number of results when a query is executed. Default
            value: Integer.MAX_VALUE (-&gt; all).</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>excerptprovider-class</entry>

            <entry>DefaultXMLExcerpt</entry>

            <entry>The name of the class that implements
            org.exoplatform.services.jcr.impl.core.query.lucene.ExcerptProvider
            and should be used for the rep:excerpt() function in a
            query.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>support-highlighting</entry>

            <entry>false</entry>

            <entry>If set to true additional information is stored in the
            index to support highlighting using the rep:excerpt()
            function.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>synonymprovider-class</entry>

            <entry>none</entry>

            <entry>The name of a class that implements
            org.exoplatform.services.jcr.impl.core.query.lucene.SynonymProvider.
            The default value is null (-&gt; not set).</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>synonymprovider-config-path</entry>

            <entry>none</entry>

            <entry>The path to the synonym provider configuration file. This
            path interpreted is relative to the path parameter. If there is a
            path element inside the SearchIndex element, then this path is
            interpreted and relative to the root path of the path. Whether
            this parameter is mandatory or not, it depends on the synonym
            provider implementation. The default value is null (-&gt; not
            set).</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>indexing-configuration-path</entry>

            <entry>none</entry>

            <entry>The path to the indexing configuration file.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>indexing-configuration-class</entry>

            <entry>IndexingConfigurationImpl</entry>

            <entry>The name of the class that implements
            org.exoplatform.services.jcr.impl.core.query.lucene.IndexingConfiguration.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>force-consistencycheck</entry>

            <entry>false</entry>

            <entry>If setting to true, a consistency check is performed,
            depending on the parameter forceConsistencyCheck. If setting to
            false, no consistency check is performed on startup, even if a
            redo log had been applied.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>spellchecker-class</entry>

            <entry>none</entry>

            <entry>The name of a class that implements
            org.exoplatform.services.jcr.impl.core.query.lucene.SpellChecker.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>spellchecker-more-popular</entry>

            <entry>true</entry>

            <entry>If setting true, spellchecker returns only the suggest
            words that are as frequent or more frequent than the checked word.
            If setting false, spellchecker returns null (if checked word exit
            in dictionary), or spellchecker will return most close suggest
            word.</entry>

            <entry>1.10</entry>
          </row>

          <row>
            <entry>spellchecker-min-distance</entry>

            <entry>0.55f</entry>

            <entry>Minimal distance between checked word and proposed suggest
            word.</entry>

            <entry>1.10</entry>
          </row>

          <row>
            <entry>errorlog-size</entry>

            <entry>50(Kb)</entry>

            <entry>The default size of error log file in Kb.</entry>

            <entry>1.9</entry>
          </row>

          <row>
            <entry>upgrade-index</entry>

            <entry>false</entry>

            <entry>Allows JCR to convert an existing index into the new
            format. Also, it is possible to set this property via system
            property, for example: -Dupgrade-index=true Indexes before JCR
            1.12 will not run with JCR 1.12. Hence you have to run an
            automatic migration: Start JCR with -Dupgrade-index=true. The old
            index format is then converted in the new index format. After the
            conversion the new format is used. On the next start, you don't
            need this option anymore. The old index is replaced and a back
            conversion is not possible - therefore better take a backup of the
            index before. (Only for migrations from JCR 1.9 and
            later.)</entry>

            <entry>1.12</entry>
          </row>

          <row>
            <entry>analyzer</entry>

            <entry>org.apache.lucene.analysis.standard.StandardAnalyzer</entry>

            <entry>Class name of a lucene analyzer to use for fulltext
            indexing of text.</entry>

            <entry>1.12</entry>
          </row>
        </tbody>
      </tgroup>
    </table>
  </section>