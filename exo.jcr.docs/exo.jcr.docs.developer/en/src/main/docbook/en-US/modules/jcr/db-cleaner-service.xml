<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<chapter id="JCR.DBCleanerService">
  <?dbhtml filename="ch-db-cleaner-service.html"?>

  <title>DBCleanService</title>

  <section>
    <title>API</title>

    <para>It is special service for removing data from database.</para>

    <note>
      <para>Code that invokes methods of DBCleanService must have
      JCRRuntimePermissions.MANAGE_REPOSITORY_PERMISSION permission;</para>
    </note>

    <para>There are three methods of DBCleanerService:</para>

    <table>
      <title>API</title>

      <tgroup cols="2">
        <tbody>
          <row>
            <entry>public static void cleanWorkspaceData(WorkspaceEntry
            wsEntry)</entry>

            <entry>Clean workspace data from database. Tables will be removed
            in case of multiDB, and only records will be removed in case of
            singleDB.</entry>
          </row>

          <row>
            <entry>public static void cleanRepositoryData(RepositoryEntry
            repoEntry)</entry>

            <entry>Cleanup repository data from database.</entry>
          </row>

          <row>
            <entry>public static getDBCleaner(Connection jdbcConn,
            WorkspaceEntry wsEntry)</entry>

            <entry>Returns DBClean object with defined connection that allow
            to manual invoke clean method on it. Note: DBClean doesn't perform
            commit or close connection. It should be done manually.</entry>
          </row>
        </tbody>
      </tgroup>
    </table>
  </section>
</chapter>
